# 🔔 모던 자바스크립트 Deep Dive 17장

**17장 생성자 함수에 의한 객체 생성**

```
17-1. Object생성자 함수
    - new 연산자와 함께 Object생성자 함수를 호출하면 빈 객체를 생성하여 반환한다.
    - 생성자함수란 new연산자와 함께 호출하여 객체(인스턴스)를 생성하는 함수를 뜻한다.
    - 자바스크립트는 String, Number, Boolean,
      Object, Function, Array, Date, RegExp, Promise등의 빌트인 생성자 함수를 제공한다.
    - Object 생성자함수를 사용해 객체를 생성하는것은 유용하지 않다.

17-2. 생성자 함수
    - 객체 리터럴에 의한 객체 생성 방식의 문제점
      > 객체 리터럴에 의한 객체 생성 방식은 직관적이고 간편하지만
        객체를 여러개 생성해야하는 경우엔 비효율적이다.
    - 생성자 함수에 의한 객체 생성 방식의 장점
      > 생성자 함수에 의한 객체 생성방식은 생성자 함수를 사용하여
        프로퍼티 구조가 복잡한 동일한 객체를 간편하게 여러개 생성할 수 있다.
    - this
      > this는 객체 자신의 프로퍼티나 메서드를 참조하기 위한 자기 참조 변수이다.
        this바인딩은 함수 호출 방식에 따라 동적으로 결정된다.
           > 함수가 일반함수로 호출되면 this는 전역객체를 가리킨다 (window)
           > 함수가 메서드로 호출되면 this는 메서드를 호출한 객체를 가리킨다
             (마침표 앞의 객체)
           > 함수가 생성자 함수로 호출되면 this는 생성자 함수가 미래에
             생성할 인스턴스를 가리킨다
           > 생성자 함수를 정의하고 new연산자와 함께 호출하면 해당함수는
             생성자 함수가 된다.
           > 생성자 함수를 정의하고 new연산자 없이 함수만 호출하면 일반함수로 동작한다.
    - 생성자 함수의 인스턴스 생성과정
      > 생성자 함수의 역할은 인스턴스를 생성하고 인스턴스를 초기화하는것
      > 생성자 함수 내부의 코드를 보면 return문이 없는데,
        이는 자바스크립트 엔진이 암묵적으로 생성자함수의 인스턴스를 생성하고,
        초기화 한 후, 인스턴스를 반환해준다.
      > 바인딩이란 식별자와 값을 연결하는 과정을 의미한다.
      > 생성자함수를 호출하면 (const circle = new Circle(3))
           > 암묵적으로 빈 객체가 생성이된 후, 빈 객체는 this에 바인딩 된다
             ( circle = {} = this )
           > this에 바인딩 되어있는 인스턴스에 프로퍼티나 메서드를 추가해주고
             생성자 함수가 parameter로 전달받은 argument들을 함수내에 할당한다
           > 생성자 함수 내부의 모든 처리가 끝나면 인스턴스가 암묵적으로 반환된다.
             ( 만약 함수내부에 return문이 있고 객체를 명시적으로 반환하면
               그 객체가 반환되고, return문이 원시값을 명시적으로 반환하면
               그 값은 무시되고 this가 반환된다.)
           > 생성자 함수 내부에서 return문은 반드시 생략
    - 내부메서드 [[Call]] 과 [[Construct]]
      > 함수는 객체지만 일반객체는 호출할 수 없고, 함수객체는 호출할 수 있다
      > 함수객체는 일반객체가 갖고있는 내부슬롯,내부메서드는 물론
        함수객체를 위한 [[Enviroment]], [[FormalParaeters]]등의 내부슬롯과
        [[Call]], [[Construct]]같은 내부 메서드를 추가로 갖고있다.
      > 함수가 일반 함수로서 호출되면 내부 메서드 [[Call]]이 호출되고
        함수가 생성자 함수로서 호출되면 내부 메서드 [[Construct]]가 호출된다.
      > [[Construct]]내부메서드를 갖는 함수 객체를 constructor, 갖지 않는 함수 객체를
        non-constructor라고 한다.
      > 모든 함수객체는 [[Call]]을 무조건 갖고있다.
    - constructor와 non-constructor의 구분
      > constructor : 함수선언문, 함수표현식, 클래스(클래스도함수다)
      > non-constructor : 메서드축약표현, arrow function
                          ( method(x){return ++x} )
      > 함수를 프로퍼티 값으로 사용하면 일반적으로 메서드로 통칭하지만
        ECMAScript에선 메서드란 메서드 축약표현만을 의미한다.
    - new연산자
      > new연산자와 함께 함수를 호출하면 생성자 함수로 동작한다.
      > 함수를 new연산자와 함께 생성자 함수로서 호출하면 함수내부의 this는
        생성자 함수가 생성할 인스턴스를 가리킨다.
      > 함수를 new연산자가 없이 일반함수로서 호출하면 함수내부의 this는 전역객체 window를 가리킨다.
    - new.target
      > 생성자 함수가 new연산자 없이 호출되는것을 방지하기 위한 용도
      > new.target은 생성자 함수 내부에서 지역변수처럼 사용되며 메타 프로퍼티라고 부르기도한다.
      > new.target은 함수 자신을 가리킨다. 일반함수로서 호출된 함수라면 undefined이다.
      > new.target이 적용안되는 환경이라면 스코프세이프 생성자 패턴을 사용할수 있다.
        ( if(!(this instanceof Circle)){ return new Circle(radius)} )
      > Object, Function, Array, Date, RegExp, Promise 빌트인함수들은
        new연산자 없이 호출해도 new연산자와 호출한것과 동일하게 동작한다.
      > String, Number, Boolean 빌트인함수들은 new연산자와 함께 호출하면
        String, Number, Boolean 객체를 생성하여 반환하지만 new연산자없이 호출하면
        문자열,숫자,불리언 값을 반환한다.
```
