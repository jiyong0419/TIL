# 🔔 모던 자바스크립트 Deep Dive 24장

**24장 클로저**

```
24-1. 렉시컬 스코프
    - 자바스크립트 엔진은 함수를 어디에 정의했는지에 따라 상위 스코프를 결정한다
      이를 렉시컬 스코프(정적 스코프)라고 칭한다.
    - 함수의 상위 스코프는 함수를 정의한 위치에 의해 정적으로 결정된다.
    - 스코프의 실체는 실행컨텍스트의 렉시컬 환경이다.
      렉시컬 환경은 환경 레코드와 외부 렉시컬 환경에대한 참조로 나뉘고,
      외부 렉시컬 환경에 대한 참조를 통해 상위 렉시컬 환경과 연결된다.
      이것이 스코프 체인이다.
    - 렉시컬 환경의 "외부 렉시컬환경에 대한 참조"에 저장할 참조값, 즉 상위 스코프에 대한
      참조는 함수 정의가 평가되는 시점에 함수가 정의된 환경에 의해 결정된다.
      이것이 바로 렉시컬 스코프다.

24-2. 함수 객체의 내부슬롯 [[Environment]]
    - 함수가 정의된 환경과 호출되는 환경은 다를 수 있고
      렉시컬 스코프가 가능하려면 함수는 상위 스코프를 기억해야한다.
      이를 위해 함수는 내부슬롯 [[Environment]]에 상위 스코프의 참조를 저장한다.
    - 함수 정의가 평가되어 함수 객체를 생성 할 때 자신의 정의된 환경에 의해 결정된 상위스코프를
      함수 객체 자신의 내부슬롯 [[Environment]]에 저장한다.
    - 함수 객체의 내부슬롯 [[Environment]]에 저장된 것은 함수 자신의 상위 스코프이다.
    - 함수 렉시컬 환경의 구성 요소인 "외부 렉시컬 환경에 대한 참조"에는 함수 객체의
      내부슬롯 [[Environment]]에 저장된 상위스코프의 렉시컬환경에 대한 참조가 할당된다.

24-3. 클로저와 렉시컬환경
    - 외부 함수보다 중첩함수가 더 오래 유지되는 경우
      중첩 함수는 이미 생명 주기가 종료된 외부함수의 변수를 참조할 수 있다.
      이러한 중첩함수를 클로저 라고 부른다.
    - 클로저는 중첩함수가 상위 스코프의 식별자를 참조하고 있으며,
      외부함수보다 더 오래 생명주기가 유지되는 중첩함수를 뜻한다.
    - 클로저에 의해 참조되는 상위스코프의 변수를 '자유변수'라고한다.

24-4. 클로저의 활용
    - 클로저는 상태를 안전하게 은닉하고 특정함수에게만 상태변경을 허용하기위해 사용한다.
    - const increase = (function (){
        let num = 0;
        return function(){ return ++num; };        //클로저
      }());

      increase(); //1
      increase(); //2
      increase(); //3
      > 위 코드가 increase()에 의해 실행되면
        즉시실행 함수가 호출되고 즉시실행 함수가 반환한 함수가 const increase에 할당된다.
        즉시실행 함수 내부에서 선언된 function () { return ++num }의 상위스코프는
        즉시실행 함수 내부이다.
        즉시실행 함수는 특성상 한번 호출되고 바로 사라지지만,
        즉시실행 함수가 반환한 함수는 const increase에 할당되어 유지되어 있고,
        동시에 자신의 상위스코프(즉시실행함수)의 자유변수(num)을 참조하고 있다.
        즉시 실행 함수는 런타임 시 단 1회만 실행되고 사라지므로 increase() 될때마다
        num 변수가 0으로 초기화 될 일은 없다.
        ( 즉, 첫번쨰 increase() 가 끝나면 increase내부에는 num이 1로 갱신되고,
          두번째 increase()부터는 갱신된 num값이 적용된다. )

24-5. 캡슐화와 정보 은닉
    - 캡슐화는 프로퍼티와 메서드를 하나로 묶는것을 말한다.
      객체의 특정 프로퍼티나 메서드를 감출 목적으로 사용하기도 하는데 이를 정보 은닉이라고한다.
    - 정보은닉은 적절치 못한 접근으로부터 객체의 상태가 변경되는것을 방지해 정보를 보호한다.
    - 자바스크립트는 public,private,protected같은 접근 제한자를 제공하지 않아
      객체의 모든 프로퍼티와 메서드는 기본적으로 public이다.




```
